import './polyfills.server.mjs';
import{a as S}from"./chunk-OKGFA4IV.mjs";import{b as p,d as b,f as C,h as F,j as k,l as O}from"./chunk-UJXBDUH4.mjs";import{a as v}from"./chunk-A74SKPLY.mjs";import"./chunk-CMAF363P.mjs";import{F as y}from"./chunk-ZDQY43XE.mjs";import{Kb as f,Ra as n,W as a,Xb as l,ab as g,wb as o,xb as t,yb as r,zb as s}from"./chunk-SN2ENI4S.mjs";import"./chunk-S6KH3LOX.mjs";var I=class c{fb=a(k);activatedRoute=a(y);cartService=a(v);checkOutForm;id=null;ngOnInit(){this.initForm(),this.getCardId()}initForm(){this.checkOutForm=this.fb.group({shippingAddress:this.fb.group({details:[null,[p.required]],phone:[null,[p.required,p.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[p.required]]})})}getCardId(){this.activatedRoute.paramMap.subscribe({next:e=>{this.id=e.get("id")}})}submitForm(){this.checkOutForm.valid&&this.cartService.checkOutSession(this.id,this.checkOutForm.value).subscribe({next:e=>{console.log(e),e.status==="success"&&window.open(e.session.url,"_self")},error:e=>{console.log(e)}})}static \u0275fac=function(m){return new(m||c)};static \u0275cmp=g({type:c,selectors:[["app-checkout"]],decls:13,vars:15,consts:[[1,"bg-gray-200","p-10","my-14","md:w-1/2","mx-auto","shadow"],[1,"text-center","text-4xl","my-3"],[3,"ngSubmit","formGroup"],[3,"element","control","id","lableInput"],[3,"element","control","id","lableInput","type"],[1,"flex","items-center","space-x-10"],[1,"btn"]],template:function(m,i){if(m&1&&(t(0,"section",0)(1,"h1",1),l(2,"CheckOut"),r(),t(3,"form",2),f("ngSubmit",function(){return i.submitForm()}),s(4,"app-input",3),t(5,"app-input",4),l(6," Accept Only Egypt Phone Numbers "),r(),s(7,"app-input",4),t(8,"div",5)(9,"button",6),l(10,"Payment By Visa"),r(),t(11,"button",6),l(12,"Payment By Cash"),r()()()()),m&2){let u,d,h;n(3),o("formGroup",i.checkOutForm),n(),o("element","text")("control",(u=i.checkOutForm.get("shippingAddress"))==null?null:u.get("details"))("id","details")("lableInput","Details"),n(),o("element","input")("control",(d=i.checkOutForm.get("shippingAddress"))==null?null:d.get("phone"))("id","phone")("lableInput","Phone")("type","tel"),n(2),o("element","input")("control",(h=i.checkOutForm.get("shippingAddress"))==null?null:h.get("city"))("id","city")("lableInput","City")("type","text")}},dependencies:[O,C,b,F,S],encapsulation:2})};export{I as CheckoutComponent};
