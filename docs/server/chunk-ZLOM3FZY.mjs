import './polyfills.server.mjs';
import{a as w}from"./chunk-OKGFA4IV.mjs";import{b as s,d as x,f as I,h as E,j as L,l as _}from"./chunk-UJXBDUH4.mjs";import{a as C}from"./chunk-ZILPXE2U.mjs";import{a as S}from"./chunk-CMAF363P.mjs";import{I as F,J as y}from"./chunk-ZDQY43XE.mjs";import{Kb as v,Mb as b,Ra as t,W as p,Xa as g,Xb as m,Yb as h,ab as f,sb as d,tb as u,wb as l,xb as o,yb as i,zb as c}from"./chunk-SN2ENI4S.mjs";import"./chunk-S6KH3LOX.mjs";function G(n,e){n&1&&(o(0,"span"),c(1,"i",9),i())}function N(n,e){if(n&1&&(o(0,"p",8),m(1),i()),n&2){let a=b();t(),h(a.msgError)}}var k=class n{constructor(e){this.fb=e}authServices=p(C);router=p(F);cookieService=p(S);isLoading=!1;msgError="";loginForm;ngOnInit(){this.initForm()}initForm(){this.loginForm=this.fb.group({email:[null,[s.required,s.email]],password:[null,[s.required,s.pattern(/^\w{6,}$/)]]})}submitForm(){this.loginForm.valid&&(this.isLoading=!0,this.authServices.loginForm(this.loginForm.value).subscribe({next:e=>{console.log(e),e.message==="success"&&(this.cookieService.set("token",e.token),console.log(this.authServices.docodeToken()),this.msgError="",setTimeout(()=>{this.router.navigate(["/home"])},1e3)),this.isLoading=!1},error:e=>{console.log(e),this.msgError=e.error.message,this.isLoading=!1}}))}static \u0275fac=function(a){return new(a||n)(g(L))};static \u0275cmp=f({type:n,selectors:[["app-login"]],decls:14,vars:10,consts:[[1,"w-10/12","mx-auto","bg-gray-200","rounded-lg","border","border-gray-200","p-4","shadow-md","md:1/2","mz-auto","my-14"],[1,"text-center","mb-3","font-light","text-3xl"],[3,"ngSubmit","formGroup"],["idInput","'email'",3,"control","typeInput","lableInput"],["idInput","'password'",3,"control","typeInput","lableInput"],[1,"flex","items-center","space-x-10"],["routerLink","/forget",1,"text-sky-600","cursor-pointer"],["type","submit",1,"btn","mt-4",3,"disabled"],[1,"text-center","text-red-900","mt-4","p-4","bg-red-200"],[1,"fas","fa-spinner","animate-spin","ml-2"]],template:function(a,r){a&1&&(o(0,"section",0)(1,"h1",1),m(2,"login Now"),i(),o(3,"form",2),v("ngSubmit",function(){return r.submitForm()}),c(4,"app-input",3),o(5,"app-input",4),m(6," Please Enter Your Password "),i(),o(7,"div",5)(8,"a",6),m(9,"Forget Passeord"),i(),o(10,"button",7),m(11," login "),d(12,G,2,0,"span"),i()(),d(13,N,2,1,"p",8),i()()),a&2&&(t(3),l("formGroup",r.loginForm),t(),l("control",r.loginForm.get("email"))("typeInput","email")("lableInput","Emial"),t(),l("control",r.loginForm.get("password"))("typeInput","password")("lableInput","Password"),t(5),l("disabled",r.isLoading),t(2),u(r.isLoading?12:-1),t(),u(r.msgError?13:-1))},dependencies:[_,I,x,E,w,y],encapsulation:2})};export{k as LoginComponent};
